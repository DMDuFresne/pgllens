# PgLLens Configuration
# Copy this file to .env and update values for your environment

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL connection URL (required)
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://readonly:password@localhost:5432/mydb

# =============================================================================
# Server Configuration
# =============================================================================

# HTTP port for the MCP server (default: 3000)
MCP_PORT=3000

# Schemas to expose, comma-separated (default: public)
EXPOSED_SCHEMAS=public

# Default schema when not specified by tools (default: first exposed schema)
DEFAULT_SCHEMA=

# =============================================================================
# Query Configuration
# =============================================================================

# Schema cache refresh interval in milliseconds (default: 300000 = 5 minutes)
SCHEMA_REFRESH_INTERVAL_MS=300000

# Query timeout in milliseconds (default: 30000 = 30 seconds)
QUERY_TIMEOUT_MS=30000

# Maximum rows returned from queries (default: 1000)
MAX_ROWS=1000

# =============================================================================
# Domain Context
# =============================================================================

# Path to a markdown file with business context (optional)
# The file contents are injected into tool descriptions to help AI understand your domain
DOMAIN_CONTEXT_FILE=

# Inline domain context string (optional, alternative to file)
# If both are set, the file takes precedence
DOMAIN_CONTEXT=

# =============================================================================
# OAuth Configuration (only used when running with --oauth flag)
# =============================================================================

# Public URL for OAuth metadata - must match what clients use to connect
# Required when running behind a reverse proxy (default: http://localhost:${MCP_PORT})
EXTERNAL_BASE_URL=

# Password for the OAuth login form (optional)
# If empty, OAuth authorization is auto-approved without a password prompt
MCP_AUTH_PASSWORD=change-me

# OAuth token lifetime in seconds (default: 604800 = 7 days)
MCP_OAUTH_TOKEN_EXPIRES_IN=604800

# Max failed login attempts before lockout (default: 5)
MCP_RATE_LIMIT_ATTEMPTS=5

# Rate limit lockout window in milliseconds (default: 900000 = 15 minutes)
MCP_RATE_LIMIT_WINDOW_MS=900000
